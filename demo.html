<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>进度条demo</title>
	 <script src="./js/common/jquery-1.11.3.min.js"></script>
	<script src="https://cdn.bootcss.com/PreloadJS/1.0.1/preloadjs.min.js"></script>
	<style>
        * {
            margin: 0;
            padding: 0;
        }
        .loading {
            display: table;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #00ffb1;
        }
        .loading > .progress {
            display: table-cell;
            vertical-align: middle;
            text-align: center;
        }
        progress::-webkit-progress-bar{     
           background: black
        }
        .deal progress { -webkit-appearance: none; background: black;}
        .deal ::-webkit-progress-inner-element { }
        .deal ::-webkit-progress-bar { border: 1px solid red; }
        .deal ::-webkit-progress-value { background: #FFF; }

        .deal ::-moz-progress-bar { background: #FFF;  border: 1px solid red; }

        .deal ::-ms-fill { background: #FFF; }
</style>
</head>
<body>
	<body>
   
    <div class="loading">
        <p class="deal">
         <progress max="100" value="0" id="pg"></progress>
        <p>
        <div class="progress"></div>
    </div>
    <img src="http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg" />
    <img src="http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg" />
    <img src="images/01.png" />
    <img src="images/01.png" />
    <img src="images/01.png" />
    <img src="images/01.png" />
    <img src="images/01.png" />
</body>

	<!-- <script>	
		var queue = new createjs.LoadQueue(false);//本地开发使用false即可
		 queue.installPlugin(createjs.Sound);//如果载入声音，必须先注册createjs.Sound
		 queue.on("complete", handleComplete, this);//载入完成后调用
		 // queue.loadFile({id:"sound", src:"sound.mp3"});//载入单个文件
		 //载入一个文件列表
		 queue.loadManifest([
		 {id: "myImage1", src:"1.jpg"},
		 {id: "myImage2", src:"1.jpg"},
		 {id: "myImage3", src:"1.jpg"},
		 {id: "myImage4", src:"1.jpg"},
		 ]);
		 function handleComplete() {
		 	alert()

		     // createjs.Sound.play("sound");
		     // var image = queue.getResult("myImage1");
		     // var bitmap = new createjs.Bitmap(image);	     
		 }
		
// var loader=new createjs.LoadQueue(false);
// loader.on("complete",onComplete);
// loader.on("error",onError);
// loader.on("progress",onProgress);
// loader.on("fileload",onFileLoad);
// loader.on("fileprogress",onFileProgress);

// loader.loadFile("1.jpg");

// function onComplete(e)
// {
//     console.log("complete");
// }
// function onError(e)
// {
//     console.log("error");
// }
// function onProgress(e)
// {
//     console.log("progress");
// }
// function onFileLoad(e)
// {
//     console.log("fileload");
// }
// function onFileProgress(e)
// {
//     console.log("fileprogress");
// }
	</script> -->



	<script>

    var preload;
    var mainfest;

    // 初始化预加载manifest清单
    function setupManifest(){
        mainfest = [
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"},
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"},
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"},
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img.zcool.cn/community/01f09e577b85450000012e7e182cf0.jpg@1280w_1l_2o_100sh.jpg"},
            { src:"http://img.zcool.cn/community/0125fd5770dfa50000018c1b486f15.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://img3.imgtn.bdimg.com/it/u=2200166214,500725521&fm=26&gp=0.jpg"},
            { src:"http://img.zcool.cn/community/01f76f5a4b4aa2a801219741c7bde1.jpg@1280w_1l_2o_100sh.jpg"}, 
            { src:"http://pic29.nipic.com/20130511/9252150_174018365301_2.jpg"},
            { src:"http://pic.58pic.com/58pic/13/74/51/99d58PIC6vm_1024.jpg"}, 
            { src:"http://img12.3lian.com/gaoqing02/01/58/85.jpg"},
            { src:"http://pic63.nipic.com/file/20150330/8993928_082652755616_2.jpg"}, 
            { src:"http://pic19.nipic.com/20120308/4970979_102637717125_2.jpg"}
        ];
    }
    // 预加载函数
    function startPreload() {
        preload = new createjs.LoadQueue(false);
        //注意加载音频文件需要调用如下代码行
        preload.installPlugin(createjs.SOUND);
        //为preloaded添加整个队列变化时展示的进度事件
        preload.addEventListener("progress",handleFileProgress);
        //为preloaded添加当队列完成全部加载后触发事件
        preload.addEventListener("complete",loadComplete);
        //设置最大并发连接数  最大值为10
        preload.setMaxConnections(1);
        preload.loadManifest(mainfest);
    }

    // 当整个队列变化时展示的进度事件的处理函数
    function handleFileProgress(event) {
        $(".progress").text("loading..."+Math.ceil(event.loaded * 100)+ "%");
        var num=Math.ceil(event.loaded * 100)
        console.log(num)
        console.log($("#pg").val(num))
    }

    // 处理preload添加当队列完成全部加载后触发事件
    function loadComplete() {
        // 设置定时器，当全部加载完毕后让100%停留0.4秒，提高用户体验，不至于让用户感觉不到
        window.setTimeout(()=>{
            $(".loading").remove();
        },400);
    }
    setupManifest();
    startPreload();
</script>

</body>
</html>